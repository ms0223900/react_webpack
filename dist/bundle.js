!function(e){function n(n){for(var o,i,c=n[0],l=n[1],s=n[2],d=0,m=[];d<c.length;d++)i=c[d],a[i]&&m.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(n);m.length;)m.shift()();return r.push.apply(r,s||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],o=!0,c=1;c<t.length;c++){var l=t[c];0!==a[l]&&(o=!1)}o&&(r.splice(n--,1),e=i(i.s=t[0]))}return e}var o={},a={0:0},r=[];function i(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=o,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)i.d(t,o,function(n){return e[n]}.bind(null,o));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var s=0;s<c.length;s++)n(c[s]);var u=l;r.push([23,1]),t()}([,,,,,,,,,,,,,,,function(e,n,t){e.exports=t.p+"610f68cf1f420652574e08d93149ee25.svg"},function(e,n,t){e.exports=t.p+"6d8e22bfc8eea28798db632581f14471.svg"},function(e,n,t){e.exports=t.p+"cd82d7b9bbe6ccdf0ba754bc110f1f23.svg"},function(e,n,t){e.exports=t.p+"5aaa4d262927b8efe010db08d5bab4d3.png"},function(e,n,t){e.exports=t.p+"49391fe39987165e210615f5702a56d2.svg"},function(e,n,t){e.exports=t.p+"43758ad08b6239989e51e81e2e603420.svg"},function(e,n,t){e.exports=t.p+"f4b44161a24abd66418e1ad803244b4d.svg"},function(e,n,t){e.exports=t.p+"3ee0e6e62ddccddf0035da8b055dd5f7.svg"},function(e,n,t){e.exports=t(42)},,,,,,,,,,,function(e,n,t){var o=t(35);"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t(37)(o,a);o.locals&&(e.exports=o.locals)},function(e,n,t){(n=e.exports=t(11)(!1)).i(t(36),""),n.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Roboto);",""]),n.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans+TC&subset=chinese-traditional);",""]),n.push([e.i,"*{font-family:'Roboto', sans-serif, 'Noto Sans TC'}.header{background-color:#345;padding:20px;color:#fff}.button2{position:relative;outline:none;width:100px;height:36px;background-color:#111;color:#fff;border-radius:6px;cursor:pointer}.button2:active{top:1px}.button3{position:relative;outline:none;width:100px;height:36px;background-color:#111;color:#fff;border-radius:6px;cursor:pointer;color:#000;background-color:#aa2}.button3:active{top:1px}#canvas{display:block;margin:auto;text-align:center;background-color:#ddd}.svg-line{stroke:#000;stroke-width:2px}.svg-text{fill:#000;font-size:24px;box-shadow:2px 2px 0px #ddd}#svg-circle1{fill:#345;stroke:#900;stroke-width:2px}.withShadow{filter:drop-shadow(2px 2px 6px #111)}.withShadow.hover{filter:drop-shadow(2px 2px 6px #900)}.title{fill:#33d;font-size:36px}.grid{fill:none;stroke:#ddd;stroke-width:.5px}#paper{width:842px;height:595px}.stop-passed{fill:#fff;stroke:#aaa;stroke-width:1px}.stop-normal,.stop-withEng{fill:#fff;stroke:#006633;stroke-width:2px}.stop-now{fill:#fff;stroke:#006633;stroke-width:2px}.stop-now-center{fill:#006633}.stopName-passed{writing-mode:tb;opacity:.35}.stopName-normal{writing-mode:tb}.stopName-now{font-weight:600;writing-mode:tb;fill:#f00}.routeNumber{font-size:62px;font-style:italic;font-weight:200;text-align:center;vertical-align:top}.routeNumber,.stop,.stop-eng{fill:#fff}.bigArrow{fill:#000}.qrcode-text{font-size:16px}.fromTo-Yunlin,.fromTo-Yunlin .routeNumber{fill:#fff}.schedule-singleTime{fill:#F4EBD2}.schedule-singleTime-text{font-size:13px}.schedule-line{stroke:#000;stroke-width:1px;stroke-dasharray:2px}.stopName-withEng,.stopNameEng-withEng{writing-mode:tb}.stopName-withEng-now,.stopNameEng-withEng-now,.stopName-withEng-end,.stopNameEng-withEng-end{fill:#9A2F29}.stop-withEng.stop-withEng-end{stroke:#000;stroke-width:2px;fill:#E5B749}.stopName-withEng-end,.stopName-withEng-now{font-weight:bolder}@media print{#changeLocation{display:none !important}}#changeLocation{position:fixed;bottom:20px;right:20px;background-color:#fff;box-shadow:0px 0px 20px #888;border-radius:10px;overflow:hidden}#changeLocation h3,#changeLocation h4,#changeLocation p{padding:10px;font-family:'Roboto', sans-serif, 'Noto Sans TC'}#changeLocation h3{font-size:20px;background-color:#303054;color:#fff}#changeLocation h4{font-size:18px;font-weight:600}#changeLocation p span{background-color:#ff0}#print{margin-left:20px}.location-button.active{background-color:#303054;color:#fff}.qrcode-nowStop,.qrcode-query{writing-mode:tb}.qrcode-query{font-weight:bold;fill:#C66E32}.Yunlin-company-info{fill:#fff;font-size:14px;letter-spacing:.5px}.stopName-withEng-down,.stopNameEng-withEng-down{writing-mode:tb}.ChanHua-company-info{font-size:13px}.fromTo-ChanHua,.fromToEng-ChanHua{fill:#fff}.fromTo-small-description{font-size:16px}\n",""])},function(e,n,t){(e.exports=t(11)(!1)).push([e.i,'/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0-modified | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n  margin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n\n/* make sure to set some focus styles for accessibility */\n:focus {\n    outline: 0;\n}\n\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\n\nbody {\n\tline-height: 1;\n}\n\nol, ul {\n\tlist-style: none;\n}\n\nblockquote, q {\n\tquotes: none;\n}\n\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: \'\';\n\tcontent: none;\n}\n\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\ninput[type=search]::-webkit-search-cancel-button,\ninput[type=search]::-webkit-search-decoration,\ninput[type=search]::-webkit-search-results-button,\ninput[type=search]::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n}\n\ninput[type=search] {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    -webkit-box-sizing: content-box;\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n}\n\ntextarea {\n    overflow: auto;\n    vertical-align: top;\n    resize: vertical;\n}\n\n/**\n * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.\n */\n\naudio,\ncanvas,\nvideo {\n    display: inline-block;\n    *display: inline;\n    *zoom: 1;\n    max-width: 100%;\n}\n\n/**\n * Prevent modern browsers from displaying `audio` without controls.\n * Remove excess height in iOS 5 devices.\n */\n\naudio:not([controls]) {\n    display: none;\n    height: 0;\n}\n\n/**\n * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.\n * Known issue: no IE 6 support.\n */\n\n[hidden] {\n    display: none;\n}\n\n/**\n * 1. Correct text resizing oddly in IE 6/7 when body `font-size` is set using\n *    `em` units.\n * 2. Prevent iOS text size adjust after orientation change, without disabling\n *    user zoom.\n */\n\nhtml {\n    font-size: 100%; /* 1 */\n    -webkit-text-size-adjust: 100%; /* 2 */\n    -ms-text-size-adjust: 100%; /* 2 */\n}\n\n/**\n * Address `outline` inconsistency between Chrome and other browsers.\n */\n\na:focus {\n    outline: thin dotted;\n}\n\n/**\n * Improve readability when focused and also mouse hovered in all browsers.\n */\n\na:active,\na:hover {\n    outline: 0;\n}\n\n/**\n * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.\n * 2. Improve image quality when scaled in IE 7.\n */\n\nimg {\n    border: 0; /* 1 */\n    -ms-interpolation-mode: bicubic; /* 2 */\n}\n\n/**\n * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.\n */\n\nfigure {\n    margin: 0;\n}\n\n/**\n * Correct margin displayed oddly in IE 6/7.\n */\n\nform {\n    margin: 0;\n}\n\n/**\n * Define consistent border, margin, and padding.\n */\n\nfieldset {\n    border: 1px solid #c0c0c0;\n    margin: 0 2px;\n    padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n * 1. Correct color not being inherited in IE 6/7/8/9.\n * 2. Correct text not wrapping in Firefox 3.\n * 3. Correct alignment displayed oddly in IE 6/7.\n */\n\nlegend {\n    border: 0; /* 1 */\n    padding: 0;\n    white-space: normal; /* 2 */\n    *margin-left: -7px; /* 3 */\n}\n\n/**\n * 1. Correct font size not being inherited in all browsers.\n * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,\n *    and Chrome.\n * 3. Improve appearance and consistency in all browsers.\n */\n\nbutton,\ninput,\nselect,\ntextarea {\n    font-size: 100%; /* 1 */\n    margin: 0; /* 2 */\n    vertical-align: baseline; /* 3 */\n    *vertical-align: middle; /* 3 */\n}\n\n/**\n * Address Firefox 3+ setting `line-height` on `input` using `!important` in\n * the UA stylesheet.\n */\n\nbutton,\ninput {\n    line-height: normal;\n}\n\n/**\n * Address inconsistent `text-transform` inheritance for `button` and `select`.\n * All other form control elements do not inherit `text-transform` values.\n * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.\n * Correct `select` style inheritance in Firefox 4+ and Opera.\n */\n\nbutton,\nselect {\n    text-transform: none;\n}\n\n/**\n * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`\n *    and `video` controls.\n * 2. Correct inability to style clickable `input` types in iOS.\n * 3. Improve usability and consistency of cursor style between image-type\n *    `input` and others.\n * 4. Remove inner spacing in IE 7 without affecting normal text inputs.\n *    Known issue: inner spacing remains in IE 6.\n */\n\nbutton,\nhtml input[type="button"], /* 1 */\ninput[type="reset"],\ninput[type="submit"] {\n    -webkit-appearance: button; /* 2 */\n    cursor: pointer; /* 3 */\n    *overflow: visible;  /* 4 */\n}\n\n/**\n * Re-set default cursor for disabled elements.\n */\n\nbutton[disabled],\nhtml input[disabled] {\n    cursor: default;\n}\n\n/**\n * 1. Address box sizing set to content-box in IE 8/9.\n * 2. Remove excess padding in IE 8/9.\n * 3. Remove excess padding in IE 7.\n *    Known issue: excess padding remains in IE 6.\n */\n\ninput[type="checkbox"],\ninput[type="radio"] {\n    box-sizing: border-box; /* 1 */\n    padding: 0; /* 2 */\n    *height: 13px; /* 3 */\n    *width: 13px; /* 3 */\n}\n\n/**\n * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.\n * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome\n *    (include `-moz` to future-proof).\n */\n\ninput[type="search"] {\n    -webkit-appearance: textfield; /* 1 */\n    -moz-box-sizing: content-box;\n    -webkit-box-sizing: content-box; /* 2 */\n    box-sizing: content-box;\n}\n\n/**\n * Remove inner padding and search cancel button in Safari 5 and Chrome\n * on OS X.\n */\n\ninput[type="search"]::-webkit-search-cancel-button,\ninput[type="search"]::-webkit-search-decoration {\n    -webkit-appearance: none;\n}\n\n/**\n * Remove inner padding and border in Firefox 3+.\n */\n\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\n    border: 0;\n    padding: 0;\n}\n\n/**\n * 1. Remove default vertical scrollbar in IE 6/7/8/9.\n * 2. Improve readability and alignment in all browsers.\n */\n\ntextarea {\n    overflow: auto; /* 1 */\n    vertical-align: top; /* 2 */\n}\n\n/**\n * Remove most spacing between table cells.\n */\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0;\n}\n\nhtml,\nbutton,\ninput,\nselect,\ntextarea {\n    color: #222;\n}\n\n\n::-moz-selection {\n    background: #b3d4fc;\n    text-shadow: none;\n}\n\n::selection {\n    background: #b3d4fc;\n    text-shadow: none;\n}\n\nimg {\n    vertical-align: middle;\n}\n\nfieldset {\n    border: 0;\n    margin: 0;\n    padding: 0;\n}\n\ntextarea {\n    resize: vertical;\n}\n\n.chromeframe {\n    margin: 0.2em 0;\n    background: #ccc;\n    color: #000;\n    padding: 0.2em 0;\n}',""])},,,,,,function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(12),i=t.n(r),c=t(8),l=t.n(c),s=t(1),u=t.n(s),d=t(2),m=t.n(d),f=t(3),p=t.n(f),h=t(4),g=t.n(h),v=t(6),x=t.n(v),E=t(5),b=t.n(E),y=t(7),w=t.n(y),N=t(13),S=t.n(N),T=(t(34),t(9)),k=t.n(T),C=(t(14),t(15)),z=t.n(C),F=function(e){var n=e.x,t=void 0===n?"200":n,o=e.y,r=void 0===o?"200":o,i=e.width,c=void 0===i?"100":i,l=e.height,s=void 0===l?"100":l,u=e.className,d=void 0===u?"svg-rect":u;return a.a.createElement("rect",{x:t,y:r,width:c,height:s,className:d})},Y=function(e){var n=e.x1,t=void 0===n?"100":n,o=e.y1,r=void 0===o?"300":o,i=e.x2,c=void 0===i?"300":i,l=e.y2,s=void 0===l?"300":l,u=e.className,d=void 0===u?"svg-line":u;return a.a.createElement("path",{d:"M ".concat(t," ").concat(r," L ").concat(c," ").concat(s),className:d})},H=function(e){var n=e.x,t=void 0===n?"200":n,o=e.y,r=void 0===o?"300":o,i=e.text,c=void 0===i?"A text":i,l=e.className,s=void 0===l?"svg-text":l;return a.a.createElement("text",k()({x:t,y:r,className:s},e),c)},O=function(e){var n=e.x,t=e.y,o=e.rotate,r=void 0===o?0:o;return a.a.createElement("g",{transform:"translate(".concat(n,", ").concat(t,") rotate(").concat(r,")")},a.a.createElement("path",k()({d:"M0 0 l16 6 l-16 6 z"},e)))},W=function(e){var n=e.x,t=void 0===n?100:n,o=e.y,r=void 0===o?100:o,i=e.width,c=void 0===i?40:i,l=e.height,s=void 0===l?20:l,u=e.rotate,d=void 0===u?0:u;return a.a.createElement("g",{transform:"translate(".concat(t,", ").concat(r,") rotate(").concat(d,")")},a.a.createElement("image",{width:c,height:s,xlinkHref:z.a,class:"bigArrow"}))},D=function(e){var n=e.x,t=e.y,o=e.h,r=e.v,i=e.r;(i>Math.abs(o/2)||i>Math.abs(r/2))&&(o>r&&(i=Math.abs(o/2)),i=Math.abs(r/2));var c=o>=0?i:-i,l=r>=0?i:-i;return a.a.createElement("path",k()({d:"\n        M".concat(n," ").concat(t," \n        h").concat(o>=0?o-i:o+i," \n        q").concat(c," 0, ").concat(c," ").concat(l," \n        v").concat(r>=0?r-2*i:r+2*i," \n        q0 ").concat(l,", ").concat(-c," ").concat(l," \n        h").concat(o>=0?-(o-i):-(o+i)," \n      "),fill:"none",stroke:"#000",strokeWidth:2.5},e))},L=function(e,n){return e-(1.175-1)*n+n},I=function(e,n,t){return e+(t-n)/2},M=function(e){for(var n=[],t=0;t<e.length;t++)n[t]={id:t,data:e[t]};return n},A=function(e){return-1!==e.indexOf("(")?e.split(/[(]/).map(function(e){return-1!==e.indexOf(")")?"("+e:e}):-1!==e.indexOf("[")?e.split(/\[/).map(function(e){return-1!==e.indexOf("]")?"["+e:e}):[e]},R={stopWithEng:{fontSize:{stopName_fs:18,stopNameEng_fs:9}},routes:{defaultStyle:{THEME:"#006633",lineWidth:3,fontSize:{"1Line":22,"2Line":18,"3Line":15,"4Line":14},drawLineArea:{x:168,y:108,w:614,h:468}},YunlinChanHua:{THEME:"#497D90",lineWidth:5,fontSize:{"1Line":22,"2Line":17,"3Line":14,"4Line":13},drawLineArea:{x:185,y:95,w:604,h:420}},ChanHua:{THEME:"#497D90",lineWidth:5,fontSize:{"1Line":22,"2Line":17,"3Line":14,"4Line":13},drawLineArea:{x:180,y:108,w:614,h:468}}},head:{ChiaYi:{fontSize:{stop:24,stopEng:14,routeNumber:60}},Yunlin:{fontSize:{stop:32,stopEng:11,routeNumber:60,pass:15},layOut:{stopName:{x:164,y:L(30,32)},stopNameEng:{x:176,y:L(72,11)},byPassStop:{x:474,y:L(12,15)},charge:{x:570,y:L(12,43)}}},ChanHua:{fontSize:{stop:34,stopEng:11,routeNumber:52}}},sideInfo:{ChiaYi:{fontSize:16},Yunlin:{stopFS:12,stopQueryFS:18}}},_="#006633",P="#497D90",U=t(16),q=t.n(U),j=t(17),B=t.n(j),V=R.stopWithEng,G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stop";switch(e){case"passed":case"end":case"now":return"".concat(n," ").concat(n,"-").concat(e);default:return"".concat(n," ").concat(n,"-normal")}},X=function(e){var n=e.r,t=e.stopNameH;return a.a.createElement("image",{width:18,height:18,x:-3,y:1.5*-n-t-18,xlinkHref:B.a})},K=function(e){var n=e.direction;return a.a.createElement("image",{width:13,height:13,transform:"left"===n?"rotate(180, 6.5, 6.5)":"",xlinkHref:q.a})},Q=function(e){var n=e.r,t=e.stopType,o=e.stopClassName;return a.a.createElement("circle",{cx:n,cy:n,r:n,className:G(t,o)})},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Chi",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;switch(arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Up"){case"Up":return"Chi"===e?1.5*-n-t+2:1.5*-n-o;case"Down":default:return 1.5*n+8}},Z=function(e){var n=e.stopName,t=void 0===n?"":n,o=e.stopNameH,r=void 0===o?0:o,i=e.stopType,c=void 0===i?"normal":i,l=e.direction,s=void 0===l?"left":l,u=e.circleR,d=void 0===u?6:u,m=e.UpOrDown,f=void 0===m?"Up":m,p=-1!==t.indexOf("醫院")?a.a.createElement(X,{r:d,stopNameH:r}):"",h="now"===c?a.a.createElement(K,{direction:s}):a.a.createElement(Q,{r:d,stopType:c,stopClassName:"stop-withEng"});return a.a.createElement(a.a.Fragment,null,"Up"===f?p:"",h)},$=function(e){var n=e.x,t=void 0===n?0:n,o=e.y,r=void 0===o?0:o,i=e.stopType,c=void 0===i?"normal":i,l=e.stopName,s=void 0===l?"車站":l,u=e.circleR,d=void 0===u?6:u,m=e.onClick;return a.a.createElement("g",{transform:"translate(".concat(t,", ").concat(r,")"),onClick:m},a.a.createElement("circle",{cx:d,cy:d,r:d,className:G(c,"stop",!0)}),"now"===c?a.a.createElement("circle",{cx:d,cy:d,r:3,className:"stop-now-center"}):"",a.a.createElement("text",{x:d-1,y:1.5*d+8,className:G(c,"stopName",!0)},s))},ee=function(e){function n(e){var t;return u()(this,n),t=p()(this,g()(n).call(this,e)),w()(x()(t),"componentDidMount",function(){t.setStopNameSpec()}),t.state={stopNameH:0,stopNameW:0,stopNameEngH:0},t.setStopNameSpec=t.setStopNameSpec.bind(x()(t)),t}return b()(n,e),m()(n,[{key:"setStopNameSpec",value:function(){if(this.stopNameEl){var e=this.stopNameEl.getBBox().height,n=this.stopNameEl.getBBox().width,t=this.stopNameEngEl.getBBox().height;this.setState({stopNameH:e,stopNameW:n,stopNameEngH:t,stopNameSpecSet:!0})}}},{key:"render",value:function(){var e=this,n=this.props,t=n.x,o=void 0===t?0:t,r=n.y,i=void 0===r?0:r,c=n.stopType,l=void 0===c?"normal":c,s=n.stopName,u=void 0===s?"車站":s,d=n.stopNameEng,m=void 0===d?"station":d,f=n.circleR,p=void 0===f?6:f,h=n.UpOrDown,g=n.direction,v=this.state,x=v.stopNameH,E=v.stopNameW,b=v.stopNameEngH,y=V.fontSize.stopNameEng_fs;return a.a.createElement("g",{transform:"translate(".concat(o,", ").concat(i,")")},a.a.createElement(Z,{stopName:u,stopNameH:x,stopType:l,direction:g,circleR:p,UpOrDown:h}),a.a.createElement("text",{x:p,y:J("Chi",p,x,b,h),className:G(l,"stopName-withEng"),ref:function(n){return e.stopNameEl=n}},u),a.a.createElement("text",{x:E+1.5,y:J("Eng",p,x,b,h),className:G(l,"stopNameEng-withEng"),style:{fontSize:y},ref:function(n){return e.stopNameEngEl=n}},m))}}]),n}(a.a.Component),ne=_,te=P,oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];switch(1*e){case-1:return t.length>0?-1!==t.indexOf(n)?"end":"normal":"passed";case 1:return t.length>0&&-1!==t.indexOf(n)?"end":"normal";case 0:return"now";default:return"normal"}},ae=function(e,n,t,o,a){return e?n+t%o*a:n-t%o*a};function re(e){var n=e.direction,t=void 0===n?"right":n,o=e.route,r=void 0===o?[]:o,i=e.x,c=void 0===i?100:i,l=e.y,s=void 0===l?200:l,u=e.width,d=void 0===u?614:u,m=e.lastStopAmount,f=void 0===m?0:m,p=e.endID,h=void 0===p?[]:p,g=e.UpOrDown,v=void 0===g?"Up":g,x=r.length,E=0!==f?f:x,b=x-1,y=d/b,w="right"===t;return a.a.createElement("g",null,a.a.createElement("path",{d:"\n          M ".concat(c," ").concat(s+6," \n          l ").concat(w?b*y:-b*y," 0"),stroke:te,strokeWidth:5}),r.map(function(e){return a.a.createElement(ee,{key:e.id,x:ae(w,c,e.id,E,y),y:s,stopName:e.stopName,stopNameEng:e.stopNameEng,stopType:oe(e.stopType,e.id,h),direction:t,UpOrDown:v})}))}var ie=function(e,n){return function(t){function o(e){return u()(this,o),p()(this,g()(o).call(this,e))}return b()(o,t),m()(o,[{key:"render",value:function(){return a.a.createElement(e,k()({},this.props,{UpOrDown:n}))}}]),o}(a.a.Component)},ce=ie(re,"Up"),le=ie(re,"Down"),se=R.routes,ue=se.defaultStyle,de=se.YunlinChanHua,me=se.ChanHua,fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.slice(n*(t-1),n*t)},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"Up"===(arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Up")?n+t/e*o:1===e?n+t/2-100:n+t/e*(o-1)},he=function(e){var n=e.l,t=void 0===n?1:n,o=e.x,r=void 0===o?1:o,i=e.y,c=void 0===i?0:i,l=e.w,s=void 0===l?0:l,u=e.h,d=void 0===u?100:u,m=e.lines,f=void 0===m?1:m,p=e.strokeWidth,h=void 0===p?3:p,g=e.strokeTheme,v=void 0===g?"#000":g,x=e.txtUpOrDown,E=void 0===x?"Up":x;return a.a.createElement(D,{x:t%2==0?r+s+12:r,y:"Up"===E?c+d/f*(t-1)+6:c+d/f*(t-2)+6,h:t%2==0?20:-20,v:d/f*1,r:10,strokeWidth:h,stroke:v})},ge=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Up";return function(o){function r(e){return u()(this,r),p()(this,g()(r).call(this,e))}return b()(r,o),m()(r,[{key:"render",value:function(){var o=this.props.routeData,r=void 0===o?[]:o,i=r.length,c=function(e){return e<10?1:Math.ceil(e/40)+1}(i),s=Math.ceil(i/c),u=n.drawLineArea,d=u.x,m=u.y,f=u.w,p=u.h,h=function(e){for(var n=[],t=0;t<e;t++)n=[].concat(l()(n),[t+1]);return n}(c);return a.a.createElement("g",{style:{fontSize:n.fontSize["".concat(c,"Line")]}},h.map(function(o){return a.a.createElement(a.a.Fragment,{key:o},o>1?a.a.createElement(he,{l:o,x:d,y:m,w:f,h:p,lines:c,strokeTheme:n.THEME,strokeWidth:n.lineWidth,txtUpOrDown:t}):"",a.a.createElement(e,{direction:o%2==0?"left":"right",route:fe(r,s,o),x:o%2==0?d+f:d,y:pe(c,m,p,o,t),width:f,lastStopAmount:o===c?s:0,endID:[0,i-1]}))}))}}]),r}(a.a.Component)},ve=ge(le,me,"Down"),xe=ge(ce,de,"Up"),Ee=ge(function(e){var n=e.direction,t=void 0===n?"right":n,o=e.route,r=void 0===o?[]:o,i=e.x,c=void 0===i?100:i,l=e.y,s=void 0===l?200:l,u=e.width,d=void 0===u?614:u,m=e.lastStopAmount,f=void 0===m?0:m,p=r.length,h=p-1,g=0!==f?f:p,v=d/h,x="right"===t;return a.a.createElement("g",null,a.a.createElement(O,{x:x?c+18:c-18,y:s,rotate:x?"0":"180, 6, 6",fill:ne}),a.a.createElement("path",{d:"\n          M ".concat(c," ").concat(s+6," \n          l ").concat(x?h*v:-h*v," 0"),stroke:ne,strokeWidth:3}),r.map(function(e){return a.a.createElement($,{key:e.id,x:ae(x,c,e.id,g,v),y:s,stopName:e.stopName,stopType:oe(e.stopType,e.id)})}))},ue,"Down");function be(e){return a.a.createElement(Ee,{routeData:e})}var ye=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"ChiaYi":return be(n);case"Yunlin":return function(e){return a.a.createElement(xe,{routeData:e})}(n);case"ChanHua":return function(e){return a.a.createElement(ve,{routeData:e})}(n);default:return be(n)}},we=function(e){function n(e){var t;return u()(this,n),(t=p()(this,g()(n).call(this,e))).state={},t}return b()(n,e),m()(n,[{key:"render",value:function(){var e=this.props,n=e.routeData,t=void 0===n?[]:n,o=e.location,r=void 0===o?"Yunlin":o,i=e.generateRouteFn,c=void 0===i?ye:i;return a.a.createElement("g",{id:"route1"},c(r,t))}}]),n}(a.a.Component),Ne=t(18),Se=t.n(Ne),Te=R.head,ke=Te.ChiaYi,Ce=Te.Yunlin,ze=Te.ChanHua,Fe=16,Ye={width:40,spacting:20},He={x:340},Oe=function(e){return e.getBBox().width},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return He.x+e.length*ke.fontSize.stop+Ye.width+2*Ye.spacting},De=function(e){var n=e.splitText,t=void 0===n?"":n;return a.a.createElement("tspan",{className:"fromTo-small-description"},A(t).length>1?A(t)[1]:"")},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[""];return e.length>1?["(".concat(e[0],")"),"經".concat(e[1])]:["",""]},Ie=function(e){var n=e.number,t=void 0===n?"0000":n,o=e.className,r=void 0===o?"ChiaYi":o,i=e.x,c=void 0===i?0:i,l=e.y,s=void 0===l?0:l,u=e.fontSize,d=void 0===u?12:u;return a.a.createElement("text",{x:c,y:s,className:"routeNumber routeNumber-".concat(r),style:{fontSize:d}},t)},Me=function(e){var n=e.fromTo1,t=void 0===n?"":n,o=e.fromTo2,r=void 0===o?"":o,i=e.className,c=void 0===i?"stop":i,l=e.fontSize,s=void 0===l?12:l,u=e.y,d=void 0===u?0:u;return a.a.createElement("g",{style:{fontSize:s}},a.a.createElement("text",{x:He.x,y:d,className:c},t),a.a.createElement("text",{x:We(t),y:d,className:c},r))},Ae=function(e){var n=e.className,t=void 0===n?"fromTo-Yunlin":n,o=e.x,r=void 0===o?0:o,i=e.y,c=void 0===i?0:i,l=e.fontSize,s=void 0===l?12:l,u=e.fromTo,d=void 0===u?[]:u,m=e.pass,f=void 0===m?[]:m,p=e.passFontSize,h=void 0===p?10:p;return a.a.createElement("g",{className:t,style:{fontSize:s}},a.a.createElement("text",{x:r,y:c},d[0]+" → "+d[1],a.a.createElement("tspan",{style:{fontSize:h}},Le(f)[0])))},Re=function(e){var n=e.className,t=void 0===n?"fromTo-ChanHua":n,o=e.y,r=void 0===o?12:o,i=e.fromTo1,c=void 0===i?"":i,l=e.fromTo1W,s=void 0===l?0:l,u=e.fromTo2,d=void 0===u?"":u,m=e.fromTo2W,f=void 0===m?0:m,p=e.fontSize,h=void 0===p?10:p,g=e.refFn1,v=e.refFn2;return a.a.createElement("g",{className:t,style:{fontSize:h}},a.a.createElement("text",{x:I(182,s,305),y:L(r,h),ref:g},c),a.a.createElement("text",{x:I(520,f,305),y:L(r,h),ref:v},d))},_e=function(e){var n=e.passStopXY,t=void 0===n?{x:0,y:0}:n,o=e.chargeXY,r=void 0===o?{x:0,y:0}:o,i=e.passText,c=void 0===i?"":i,l=e.chargeText,s=void 0===l?"":l,u=e.fontSize,d=void 0===u?10:u;return a.a.createElement("g",{className:"by-pass-Yunlin",style:{fontSize:d}},a.a.createElement("text",{x:t.x,y:t.y},Le(c)[1]),a.a.createElement("text",{x:r.x,y:r.y},s))},Pe=function(e){var n=e.number,t=void 0===n?"0000":n,r=e.fromTo,i=void 0===r?["a","b"]:r,c=e.fromToEng,l=void 0===c?["",""]:c;return a.a.createElement("g",null,a.a.createElement("image",{xlinkHref:Se.a,width:"840"}),a.a.createElement(Ie,{x:10,y:L(Fe,ke.fontSize.routeNumber),number:t,className:"ChiaYi",fontSize:ke.fontSize.routeNumber}),a.a.createElement("g",{className:"fromTo",transform:0===l[0].length?"translate(0, 8)":"translate(0, 0)"},a.a.createElement(Me,{y:L(Fe,ke.fontSize.stop),fromTo1:i[0],fromTo2:a.a.createElement(o.Fragment,null,A(i[1])[0],a.a.createElement(De,{splitText:i[1]})),className:"stop",fontSize:ke.fontSize.stop}),a.a.createElement(W,{x:He.x+i[0].length*ke.fontSize.stop+Ye.spacting,y:Fe+2,width:40,rotate:0,fill:"#000"}),a.a.createElement(Me,{y:L(Fe,ke.fontSize.stopEng)+30,fromTo1:l[0],fromTo2:l[1],className:"stop-eng",fontSize:ke.fontSize.stopEng})))},Ue=function(e){var n=e.number,t=void 0===n?"0000":n,o=e.fromTo,r=void 0===o?["a","b"]:o,i=e.fromToEng,c=void 0===i?["",""]:i,l=e.pass,s=void 0===l?"":l,u=e.charge,d=void 0===u?"":u,m=Ce.fontSize;return a.a.createElement("g",{className:"head-Yunlin"},a.a.createElement(Ie,{x:14,y:L(24,60)-7,number:t,className:"Yunlin",fontSize:t.trim().length>4?"48":m.routeNumber}),a.a.createElement(Ae,{x:Ce.layOut.stopName.x,y:Ce.layOut.stopName.y,fontSize:m.stop,fromTo:r,pass:s}),a.a.createElement(Ae,{x:Ce.layOut.stopNameEng.x,y:Ce.layOut.stopNameEng.y,fontSize:m.stopEng,fromTo:c}),a.a.createElement(_e,{passStopXY:Ce.layOut.byPassStop,chargeXY:Ce.layOut.charge,passText:s,chargeText:d,fontSize:Ce.fontSize.pass}))},qe=function(e){function n(e){var t;return u()(this,n),t=p()(this,g()(n).call(this,e)),w()(x()(t),"componentDidMount",function(){t.setState({fromTo1_W:Oe(t.fromTo1),fromTo2_W:Oe(t.fromTo2),fromTo1Eng_W:Oe(t.fromToEng1),fromTo2Eng_W:Oe(t.fromToEng2)})}),t.state={fromTo1_W:0,fromTo2_W:0,fromTo1Eng_W:0,fromTo2Eng_W:0},t.setFromTo1=function(e){return t.fromTo1=e},t.setFromTo2=function(e){return t.fromTo2=e},t.setFromToEng1=function(e){return t.fromToEng1=e},t.setFromToEng2=function(e){return t.fromToEng2=e},t}return b()(n,e),m()(n,[{key:"render",value:function(){var e=ze.fontSize,n=e.routeNumber,t=e.stop,o=e.stopEng,r=this.props,i=r.number,c=void 0===i?"0000":i,l=r.fromTo,s=void 0===l?["a","b"]:l,u=r.fromToEng,d=void 0===u?["",""]:u,m=this.state,f=m.fromTo1_W,p=m.fromTo2_W,h=m.fromTo1Eng_W,g=m.fromTo2Eng_W;return console.log(A(s[1])),a.a.createElement("g",{className:"head-ChanHua"},a.a.createElement(Ie,{x:13,y:L(24,n),number:c,className:"ChanHua",fontSize:ze.fontSize.routeNumber}),a.a.createElement(Re,{fromTo1:s[0],fromTo2:a.a.createElement("tspan",null,A(s[1])[0],a.a.createElement(De,{splitText:s[1]})),fromTo1W:f,fromTo2W:p,fontSize:t,refFn1:this.setFromTo1,refFn2:this.setFromTo2}),a.a.createElement("text",{className:"arrow-text-ChanHua"}," → "),a.a.createElement(Re,{y:48,fromTo1:d[0],fromTo2:d[1],fromTo1W:h,fromTo2W:g,fontSize:o,refFn1:this.setFromToEng1,refFn2:this.setFromToEng2}))}}]),n}(a.a.Component),je=t(19),Be=t.n(je),Ve=t(20),Ge=t.n(Ve),Xe=R.sideInfo,Ke=Xe.ChiaYi,Qe=Xe.Yunlin,Je={top:328,left:32,between:16},Ze=function(e){var n=e.x,t=void 0===n?0:n,o=e.y,r=void 0===o?0:o,i=e.width,c=void 0===i?72:i,l=e.text,s=void 0===l?"text":l,u=e.imgSrc,d=void 0===u?"":u,m=Ke.fontSize;return a.a.createElement("g",{transform:"translate(".concat(t,", ").concat(r,")")},a.a.createElement("image",{xlinkHref:d,width:c}),a.a.createElement(H,{x:0,y:L(c,m)+4,text:s,className:"qrcode-text"}))},$e=function(e){var n=e.x,t=void 0===n?0:n,o=e.y,r=void 0===o?0:o,i=e.width,c=void 0===i?90:i,l=e.imsi,s=void 0===l?"466011200153956":l,u=e.nowStop,d=void 0===u?"頂湳站":u,m=Qe.stopFS,f=Qe.stopQueryFS,p="http://ebus.yunlin.gov.tw/QRcodeGetBusTime.aspx?imsi="+s;return a.a.createElement("g",{transform:"translate(".concat(t,", ").concat(r,")")},a.a.createElement("image",{xlinkHref:"http://chart.apis.google.com/chart?cht=qr&choe=UTF-8&chs=300x300&chl="+p,width:c}),a.a.createElement("text",{x:90,y:L(-8,m)+4,fontSize:m,className:"qrcode-nowStop"},"(".concat(d,")")),a.a.createElement("text",{x:108,y:L(0,f)-6,fontSize:f,className:"qrcode-query"},"到站查詢"))},en=function(){return a.a.createElement("g",null,a.a.createElement("g",{transform:"translate(".concat(Je.left,", 0)")},a.a.createElement(Ze,{x:0,y:Je.top,width:72,text:"公車動態",imgSrc:Be.a}),a.a.createElement(Ze,{x:0,y:Je.top+Je.between+72+4+10,width:72,text:"梯形票價",imgSrc:Ge.a}),a.a.createElement("g",{transform:"translate(0, 550)"},a.a.createElement("circle",{cx:8,cy:8,r:8,className:"stop-now"}),a.a.createElement("circle",{cx:8,cy:8,r:4,className:"stop-now-center"}),a.a.createElement("text",{x:18,y:13,fontSize:14,className:"stop-now-sideInfo"},"現在位置"))))},nn=function(e){var n=e.byPass,t=void 0===n?"":n,o=e.time,r=M(void 0===o?[""]:o);return a.a.createElement("g",null,a.a.createElement("text",{x:32,y:150,className:"byPass-ChanHua"},t),r.map(function(e){return a.a.createElement("text",{key:e.id,x:32,y:200+18*e.id},e.data)}))},tn=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[]]).map(function(e){return e.map(function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0011",n=[e.slice(0,2),e.slice(2)];if(1*n[0]<25&&1*n[1]<61&&2===n[1].length)return n;throw new Error("You have the wrong format of time string!")}(e)})})},on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["00","00"],n=[];if(e.length>1){for(var t=function(e){for(var n=[],t=0;t<e.length;t++)-1===n.indexOf(e[t])&&(n=[].concat(l()(n),[e[t]]));return n}([].concat(l()(e[0]),l()(e[1])).map(function(e){return e[0]})).sort(),o=e[0].map(function(e){return e[0]}),a=e[1].map(function(e){return e[0]}),r=0;r<t.length;r++){var i=o.indexOf(t[r]),c=a.indexOf(t[r]),s=-1!==i?l()(e[0][i].slice(1)):["-"],u=-1!==c?l()(e[1][c].slice(1)):["-"];n[r]=[t[r],s,u]}return n}return e.map(function(e){return e.map(function(e){return[e[0],e.slice(1)]})})[0]},an=function(e,n,t){return e.length>5?6:(t-e.length*n)/2},rn=function(e){var n=e.x,t=void 0===n?37:n,o=e.length,r=void 0===o?1:o;return a.a.createElement(Y,{x1:t,y1:107,x2:t,y2:107+22*(r+2),className:"schedule-line"})},cn=function(e){var n=e.hour,t=void 0===n?"00":n,o=e.normalMin,r=void 0===o?"-":o,i=e.holidayMin,c=void 0===i?"-":i,l=e.y,s=void 0===l?150:l;return a.a.createElement("g",null,a.a.createElement("text",{x:10,y:s,className:"schedule-singleTime-text"},a.a.createElement("tspan",null,t),a.a.createElement("tspan",{x:37+an(r,7.5,61)},r),a.a.createElement("tspan",{x:98+an(c,7.5,65)},c)))},ln=function(e){var n=e.objArr,t=void 0===n?[{}]:n;return a.a.createElement("g",null,t.id%2==1?a.a.createElement(F,{x:0,y:150+22*t.id,width:164,height:22,className:"schedule-singleTime"}):"",a.a.createElement(cn,{hour:t.data[0],normalMin:t.data[1].join(" "),holidayMin:t.data.length>2?t.data[2].join(" "):t.data[1].join(" "),y:150+22*t.id+16}))},sn=function(e){var n=e.time,t=tn(n).map(function(e){return function(e){for(var n="",t=[],o=0,a=0;a<e.length;a++)n===e[a][0]?t[o]=[].concat(l()(t[o]),[e[a][1]]):(++o,n=e[a][0],t[o]=[n,e[a][1]]);return t.slice(1)}(e)}),o=on(t),r=M(o);return a.a.createElement("g",null,r.map(function(e){return a.a.createElement(ln,{key:e,objArr:e})}),a.a.createElement(rn,{x:37,length:r.length}),a.a.createElement(rn,{x:98,length:r.length}))},un=function(e){function n(e){var t;return u()(this,n),t=p()(this,g()(n).call(this,e)),w()(x()(t),"componentDidMount",function(){var e=t.txt1El.getBBox().width,n=t.txt2El?t.txt2El.getBBox().width:0;t.setState({txt1_Width:e,txt2_Width:n})}),t.state={txt1_Width:0,txt2_Width:0},t}return b()(n,e),m()(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.x1FromRight,o=void 0===t?0:t,r=n.x2FromRight,i=void 0===r?0:r,c=n.y,l=void 0===c?0:c,s=n.txt1,u=void 0===s?"":s,d=n.txt2,m=void 0===d?"":d,f=n.location,p=this.state,h=p.txt1_Width,g=p.txt2_Width;return a.a.createElement("g",null,a.a.createElement("text",{x:840-h-g-o-i,y:l,ref:function(n){return e.txt1El=n},className:"".concat(f,"-company-info")},u),""!==m?a.a.createElement("text",{x:840-g-i,y:l,ref:function(n){return e.txt2El=n},className:"".concat(f,"-company-info")},m):"")}}]),n}(a.a.Component),dn=t(21),mn=t.n(dn),fn=t(22),pn=t.n(fn),hn=["ChiaYi","Yunlin","ChanHua"],gn=function(e){var n=e.routes,t=void 0===n?[]:n,r=e.loadCompleteCount,i=void 0===r?0:r,c=e.isPreview,l=void 0===c||c,s=e.location,u=void 0===s?"ChiaYi":s;return a.a.createElement("div",{id:"SVGArea"},i===hn.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ChiaYi",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.filter(function(n){return n.location===e})[0]?n.filter(function(n){return n.location===e})[0].routeData:n;return t?o.slice(0,10):o}(u,t,l).map(function(e){return a.a.createElement(o.Fragment,{key:e},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ChiaYi",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"ChiaYi":return a.a.createElement(vn,{routes:n});case"Yunlin":return a.a.createElement(xn,{routes:n});case"ChanHua":return a.a.createElement(En,{routes:n});default:return""}}(u,e))}):"please wait")},vn=function(e){function n(e){return u()(this,n),p()(this,g()(n).call(this,e))}return b()(n,e),m()(n,[{key:"render",value:function(){var e=this.props,n=e.routes,t=e.loadingStatus;return a.a.createElement(o.Fragment,null,a.a.createElement("div",null,a.a.createElement("svg",{id:"paper",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement(Pe,{number:n.number,fromTo:n.fromTo,fromToEng:n.fromToEng}),a.a.createElement(en,null),a.a.createElement(we,{routeData:n.data,location:"ChiaYi",onLoad:t}),a.a.createElement(un,{x1FromRight:40,x2FromRight:40,y:100,txt1:n.companyService[0],txt2:n.companyService.length>1?n.companyService[1]:"",location:"ChiaYi"}))))}}]),n}(a.a.Component),xn=function(e){function n(e){return u()(this,n),p()(this,g()(n).call(this,e))}return b()(n,e),m()(n,[{key:"render",value:function(){var e=this.props.routes;return a.a.createElement("div",null,a.a.createElement("svg",{id:"paper",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("image",{width:"840",xlinkHref:mn.a}),a.a.createElement(Ue,{number:e.number,fromTo:e.fromTo,fromToEng:e.fromToEng,pass:e.pass,charge:e.charge}),a.a.createElement(sn,{time:e.time}),a.a.createElement(we,{routeData:e.data,location:"Yunlin"}),a.a.createElement($e,{x:0,y:470,width:90,imsi:e.stopNow[0].trim(),nowStop:e.stopNow[1]}),a.a.createElement(un,{x1FromRight:202,x2FromRight:74,y:586,txt1:e.companyService[0],txt2:e.companyService[1],location:"Yunlin"})))}}]),n}(a.a.Component),En=function(e){function n(e){return u()(this,n),p()(this,g()(n).call(this,e))}return b()(n,e),m()(n,[{key:"render",value:function(){var e=this.props.routes;return a.a.createElement("div",null,a.a.createElement("svg",{id:"paper",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("image",{width:"840",xlinkHref:pn.a}),a.a.createElement(qe,{number:e.number,fromTo:e.fromTo,fromToEng:e.fromToEng,pass:e.pass,charge:e.charge}),a.a.createElement(we,{routeData:e.data,location:"ChanHua"}),a.a.createElement(un,{x1FromRight:202,x2FromRight:74,y:86,txt1:e.companyService[0],txt2:e.companyService[1],location:"ChanHua"}),a.a.createElement(nn,{byPass:e.byPass,time:e.time})))}}]),n}(a.a.Component),bn=["ChiaYi","Yunlin","ChanHua"],yn=[{id:"ChiaYi",buttonText:"ChiaYi 嘉義"},{id:"Yunlin",buttonText:"Yunlin 雲林"},{id:"ChanHua",buttonText:"ChanHua 彰化"}],wn={method:"GET",mode:"cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"text/plain;charset=UTF-8"}},Nn=function(e,n){for(var t=[],o=function(o){t[o]=n.filter(function(n){return n.NameZh.trim()===e[o].number.trim()}).map(function(e){return e.ProviderId})},a=0;a<e.length;a++)o(a);return t},Sn=function(e){return fetch("allRoutes_".concat(e,".json")).then(function(e){return e.json()}).then(function(e){return new Promise(function(n){return n(e)},function(e){return console.log(e)})})},Tn=function(e){return fetch("http://ebus.cyhg.gov.tw/cms/api/route",wn).then(function(e){return e.json()}).then(function(n){return new Promise(function(t){return t([e,Nn(e,n)])},function(e){return console.log(e)})})},kn=function(e){return fetch("http://ebus.cyhg.gov.tw/cms/api/provider",wn).then(function(e){return e.json()}).then(function(n){return new Promise(function(t){return t(function(e,n,t){for(var o=[],a=0;a<n.length;a++)o[a]=n[a].map(function(e){return e=t.filter(function(n){return n.Id===e}).map(function(e){return e.NameZh.replace("鼠?","公總")+": "+e.telephone})}).map(function(e){return e[0]}),e[a]=S()({},e[a],{companyService:o[a]});return e}(e[0],e[1],n))},function(e){return console.log(e)})})},Cn=function(e){var n=e.id,t=void 0===n?"ChiaYi":n,o=e.location,r=void 0===o?"ChiaYi":o,i=e.buttonText,c=void 0===i?"":i,l=e.onClickFn,s=void 0===l?function(){}:l;return a.a.createElement("button",{id:t,className:r===t?"location-button active":"location-button",onClick:s},c)},zn=function(e){var n=e.location,t=void 0===n?"ChiaYi":n,r=e.loadComplete,i=void 0===r?0:r,c=e.isPreview,l=void 0===c||c,s=e.changeViewModeFn,u=void 0===s?function(){}:s,d=e.changeLocationFn,m=void 0===d?function(){}:d;return a.a.createElement(o.Fragment,null,a.a.createElement("div",{id:"loadingArea",style:i===bn.length?{display:"none"}:{display:"block"}},a.a.createElement("img",{src:"https://www.coolpix.com.tw/images/loading_s.gif"}),"如果轉很久，可能是沒開啟CORS，或是資料太多"),a.a.createElement("div",{id:"changeLocation"},a.a.createElement("div",{id:"manual"},a.a.createElement("h3",null,"操作說明 "),a.a.createElement("h4",null,"列印設定:"),a.a.createElement("p",null,"設定",a.a.createElement("span",null,"132%, 無邊界")),a.a.createElement("hr",null),a.a.createElement("h4",null,"公車路線檔案: (檔案格式為.csv, 需為utf-8編碼)"),a.a.createElement("p",null,"放置於 ",a.a.createElement("span",null," src/routeFiles/該區域的資料夾"))),a.a.createElement("hr",null),a.a.createElement("h4",null,"切換顯示模式: 預覽(只有10張) / 全部"),a.a.createElement("button",{id:"preview",onClick:u,className:l?"location-button active":"location-button"},"預覽"),a.a.createElement("button",{id:"all",onClick:u,className:l?"location-button":"location-button active"},"全部(資料量大時 需等待片刻)"),a.a.createElement("hr",null),a.a.createElement("h4",null,"切換路線 / 列印"),yn.map(function(e){return a.a.createElement(Cn,{key:e.id,id:e.id,location:t,buttonText:e.buttonText,onClickFn:m})}),a.a.createElement("button",{id:"print",onClick:window.print},"列印")))},Fn=function(e){function n(e){var t;return u()(this,n),t=p()(this,g()(n).call(this,e)),w()(x()(t),"componentWillMount",function(){for(var e=function(e){var n=bn[e];"ChiaYi"!==n?Sn(n).then(function(e){return t.setState({routes:[].concat(l()(t.state.routes),[{location:n,routeData:e}])})}).catch(function(e){return console.log(e)}):Sn(n).then(function(e){return Tn(e)}).then(function(e){return kn(e)}).then(function(e){return t.setState({routes:[].concat(l()(t.state.routes),[{location:n,routeData:e}])})}).catch(function(e){return console.log(e)})},n=0;n<bn.length;n++)e(n)}),w()(x()(t),"componentDidMount",function(){document.title=t.state.location+"SVG"}),w()(x()(t),"componentDidUpdate",function(e,n){t.state.location!==n.location&&(document.title=t.state.location+"SVG"),t.state.routes.length!==n.routes.length&&t.setState(function(e){return{loadComplete:e.loadComplete+1}})}),w()(x()(t),"changeLocation",function(e){0;var n=e.target.id;t.state.location!==n&&t.setState({location:n})}),w()(x()(t),"changeViewMode",function(e){var n=e.target.id;t.state.isPreview&&"all"===n?t.setState({isPreview:!1}):t.setState({isPreview:!0})}),t.state={text:"",routes:[],location:"ChiaYi",loadComplete:0,isPreview:!0},t}return b()(n,e),m()(n,[{key:"render",value:function(){var e=this.state,n=e.routes,t=e.location,o=e.loadComplete,r=e.isPreview;return a.a.createElement("div",null,a.a.createElement(gn,{loadCompleteCount:o,routes:n,isPreview:r,location:t}),a.a.createElement(zn,{location:t,loadComplete:o,isPreview:r,changeViewModeFn:this.changeViewMode,changeLocationFn:this.changeLocation}))}}]),n}(a.a.Component);i.a.render(a.a.createElement(Fn,null),document.getElementById("root"))}]);